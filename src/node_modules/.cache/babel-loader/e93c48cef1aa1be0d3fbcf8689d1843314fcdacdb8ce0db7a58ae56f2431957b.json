{"ast":null,"code":"var _jsxFileName = \"/home/jhn/personal-work/Bkash/src/src/App.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport React, { useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n  const bKash = window.bkash;\n\n  // invoice\n  useEffect(() => {\n    let paymentID = \"\";\n    // if (ssInvoice) {\n    bKash.init({\n      paymentMode: \"checkout\",\n      //fixed value ‘checkout’\n      paymentRequest: {\n        amount: 1,\n        merchantInvoiceNumber: \"01848189974\",\n        intent: \"sale\"\n      },\n      createRequest: async function (request) {\n        try {\n          var _data$data;\n          const {\n            data\n          } = await axios.post(`http://localhost:5000/createPayment`, request);\n          if (data !== null && data !== void 0 && (_data$data = data.data) !== null && _data$data !== void 0 && _data$data.paymentID) {\n            var _data$data2;\n            paymentID = data === null || data === void 0 ? void 0 : (_data$data2 = data.data) === null || _data$data2 === void 0 ? void 0 : _data$data2.paymentID;\n            bKash.create().onSuccess(data === null || data === void 0 ? void 0 : data.data);\n          } else {\n            bKash.create().onError();\n            //window.location.href = \"/payment-failed\";\n          }\n        } catch (error) {\n          bKash.create().onError();\n          //window.location.href = \"/payment-failed\";\n        }\n      },\n\n      executeRequestOnAuthorization: async function () {\n        try {\n          const {\n            data\n          } = await axios.post(`http://localhost:5000/executePayment?paymentID=${paymentID}`);\n          if ((data === null || data === void 0 ? void 0 : data.data.status) === \"paid\") {\n            window.location.href = \"/payment-success\";\n          } else {\n            window.location.href = \"/payment-failed\";\n            bKash.execute().onError();\n          }\n        } catch (error) {\n          bKash.execute().onError();\n          window.location.href = \"/payment-failed\";\n          // console.log(error);\n        }\n      }\n    });\n    // }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      // disabled={!agreement}\n      className: \"btn btn-success btn-lg mt-4 h2\"\n      // onClick={handlePayment}\n      ,\n      id: \"bKash_button\",\n      children: \"Payment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["axios","React","useEffect","jsxDEV","_jsxDEV","App","_s","bKash","window","bkash","paymentID","init","paymentMode","paymentRequest","amount","merchantInvoiceNumber","intent","createRequest","request","_data$data","data","post","_data$data2","create","onSuccess","onError","error","executeRequestOnAuthorization","status","location","href","execute","children","className","id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/jhn/personal-work/Bkash/src/src/App.js"],"sourcesContent":["import axios from \"axios\";\nimport React, { useEffect } from \"react\";\n\nexport default function App() {\n  const bKash = window.bkash;\n\n  // invoice\n  useEffect(() => {\n    let paymentID = \"\";\n    // if (ssInvoice) {\n    bKash.init({\n      paymentMode: \"checkout\", //fixed value ‘checkout’\n      paymentRequest: {\n        amount: 1,\n        merchantInvoiceNumber: \"01848189974\",\n        intent: \"sale\",\n      },\n      createRequest: async function (request) {\n        try {\n          const { data } = await axios.post(\n            `http://localhost:5000/createPayment`,\n            request\n          );\n          if (data?.data?.paymentID) {\n            paymentID = data?.data?.paymentID;\n            bKash.create().onSuccess(data?.data);\n          } else {\n            bKash.create().onError();\n            //window.location.href = \"/payment-failed\";\n          }\n        } catch (error) {\n          bKash.create().onError();\n          //window.location.href = \"/payment-failed\";\n        }\n      },\n      executeRequestOnAuthorization: async function () {\n        try {\n          const { data } = await axios.post(\n            `http://localhost:5000/executePayment?paymentID=${paymentID}`\n          );\n          if (data?.data.status === \"paid\") {\n            window.location.href = \"/payment-success\";\n          } else {\n            window.location.href = \"/payment-failed\";\n            bKash.execute().onError();\n          }\n        } catch (error) {\n          bKash.execute().onError();\n          window.location.href = \"/payment-failed\";\n          // console.log(error);\n        }\n      },\n    });\n    // }\n  }, []);\n\n  return (\n    <div>\n      <button\n        // disabled={!agreement}\n        className=\"btn btn-success btn-lg mt-4 h2\"\n        // onClick={handlePayment}\n        id=\"bKash_button\"\n      >\n        Payment\n      </button>\n    </div>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,IAAIC,SAAS,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzC,eAAe,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EAC5B,MAAMC,KAAK,GAAGC,MAAM,CAACC,KAAK;;EAE1B;EACAP,SAAS,CAAC,MAAM;IACd,IAAIQ,SAAS,GAAG,EAAE;IAClB;IACAH,KAAK,CAACI,IAAI,CAAC;MACTC,WAAW,EAAE,UAAU;MAAE;MACzBC,cAAc,EAAE;QACdC,MAAM,EAAE,CAAC;QACTC,qBAAqB,EAAE,aAAa;QACpCC,MAAM,EAAE;MACV,CAAC;MACDC,aAAa,EAAE,eAAAA,CAAgBC,OAAO,EAAE;QACtC,IAAI;UAAA,IAAAC,UAAA;UACF,MAAM;YAAEC;UAAK,CAAC,GAAG,MAAMpB,KAAK,CAACqB,IAAI,CAC9B,qCAAoC,EACrCH,OACF,CAAC;UACD,IAAIE,IAAI,aAAJA,IAAI,gBAAAD,UAAA,GAAJC,IAAI,CAAEA,IAAI,cAAAD,UAAA,eAAVA,UAAA,CAAYT,SAAS,EAAE;YAAA,IAAAY,WAAA;YACzBZ,SAAS,GAAGU,IAAI,aAAJA,IAAI,wBAAAE,WAAA,GAAJF,IAAI,CAAEA,IAAI,cAAAE,WAAA,uBAAVA,WAAA,CAAYZ,SAAS;YACjCH,KAAK,CAACgB,MAAM,CAAC,CAAC,CAACC,SAAS,CAACJ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEA,IAAI,CAAC;UACtC,CAAC,MAAM;YACLb,KAAK,CAACgB,MAAM,CAAC,CAAC,CAACE,OAAO,CAAC,CAAC;YACxB;UACF;QACF,CAAC,CAAC,OAAOC,KAAK,EAAE;UACdnB,KAAK,CAACgB,MAAM,CAAC,CAAC,CAACE,OAAO,CAAC,CAAC;UACxB;QACF;MACF,CAAC;;MACDE,6BAA6B,EAAE,eAAAA,CAAA,EAAkB;QAC/C,IAAI;UACF,MAAM;YAAEP;UAAK,CAAC,GAAG,MAAMpB,KAAK,CAACqB,IAAI,CAC9B,kDAAiDX,SAAU,EAC9D,CAAC;UACD,IAAI,CAAAU,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEA,IAAI,CAACQ,MAAM,MAAK,MAAM,EAAE;YAChCpB,MAAM,CAACqB,QAAQ,CAACC,IAAI,GAAG,kBAAkB;UAC3C,CAAC,MAAM;YACLtB,MAAM,CAACqB,QAAQ,CAACC,IAAI,GAAG,iBAAiB;YACxCvB,KAAK,CAACwB,OAAO,CAAC,CAAC,CAACN,OAAO,CAAC,CAAC;UAC3B;QACF,CAAC,CAAC,OAAOC,KAAK,EAAE;UACdnB,KAAK,CAACwB,OAAO,CAAC,CAAC,CAACN,OAAO,CAAC,CAAC;UACzBjB,MAAM,CAACqB,QAAQ,CAACC,IAAI,GAAG,iBAAiB;UACxC;QACF;MACF;IACF,CAAC,CAAC;IACF;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,oBACE1B,OAAA;IAAA4B,QAAA,eACE5B,OAAA;MACE;MACA6B,SAAS,EAAC;MACV;MAAA;MACAC,EAAE,EAAC,cAAc;MAAAF,QAAA,EAClB;IAED;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV;AAAChC,EAAA,CAjEuBD,GAAG;AAAAkC,EAAA,GAAHlC,GAAG;AAAA,IAAAkC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}